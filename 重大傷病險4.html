<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>é¢å°ç™Œç—‡åŠé‡å¤§å‚·ç—…é¢¨éšª.æˆ‘å€‘å¯ä»¥æ€éº¼åš</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --app-height: 100%; }
        body { background-color: #f8fafc; -webkit-tap-highlight-color: transparent; font-size: 16px; }
        
        /* å…§å®¹å€å¡Šåˆ‡æ›å‹•ç•« */
        .content-section { display: none; animation: fadeIn 0.4s ease-out forwards; }
        .content-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .insurance-text { color: #006400; font-weight: 600; }
        
        /* ç·¨è¼¯å€åŸŸç„¦é»æ¨£å¼ */
        .editable-element { min-height: 1.2em; transition: background 0.2s; border-radius: 4px; padding: 2px; }
        .editable-element:focus { outline: none; background-color: #f0f7ff; border-bottom: 2px solid #3b82f6; }
        
        /* è¶…é€£çµæ‡¸åœç‰¹æ•ˆï¼šç´…è‰² + æ”¾å¤§10% */
        .editable-element a { 
            transition: all 0.2s ease-in-out; 
            display: inline-block; 
            cursor: pointer !important;
            color: #2563eb;
            text-decoration: underline;
        }
        .editable-element a:hover { 
            color: #ef4444 !important; /* ç´…è‰² */
            transform: scale(1.1);
        }
        
        /* Emoji å‹•æ…‹æ•ˆæœè¨­å®š */
        @keyframes soft-float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-8px); }
            100% { transform: translateY(0px); }
        }

        @keyframes pulse-bounce {
            0% { transform: scale(1.2) rotate(0deg); }
            20% { transform: scale(1.2) rotate(-15deg); }
            40% { transform: scale(1.2) translateY(-5px); }
            60% { transform: scale(1.2) rotate(15deg); }
            80% { transform: scale(1.2) translateY(0px); }
            100% { transform: scale(1.2) rotate(0deg); }
        }

        .emoji-icon {
            display: inline-block;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            animation: soft-float 3s ease-in-out infinite;
        }

        /* å°è¦½æŒ‰éˆ•æ»‘å…¥æ•ˆæœï¼šèƒŒæ™¯æ·¡ç¶ è‰² + Emoji æ”¾å¤§ 20% ä¸¦å½ˆè·³ */
        .btn-nav {
            transition: all 0.3s ease;
        }
        .btn-nav:hover:not(.active) {
            background-color: #f0fdf4 !important; 
            border-color: #bbf7d0 !important; 
        }
        .btn-nav:hover .emoji-icon {
            animation: pulse-bounce 0.8s ease-in-out infinite;
            filter: drop-shadow(0 10px 8px rgba(0,0,0,0.15));
        }
        
        /* å°è¦½æŒ‰éˆ•å•Ÿå‹•æ¨£å¼ */
        .btn-nav.active { background-color: #1e40af; color: white; border-color: #1e40af; }
        .btn-nav.active .emoji-icon { animation: soft-float 1.5s ease-in-out infinite; }
        
        /* å•é¡Œæ¼¸ç¾æ•ˆæœ */
        .question-item {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.6s ease;
            pointer-events: none;
        }
        .question-item.show {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }

        /* è¶…é€£çµå°å·¥å…·å½ˆçª— */
        #link-bubble {
            display: none;
            position: absolute;
            z-index: 100;
            background: white;
            box-shadow: 0 10px 25px -5px rgba(0,0,0,0.2);
            border-radius: 99px;
            padding: 6px 16px;
            border: 1px solid #e2e8f0;
            align-items: center;
            gap: 8px;
        }

        .cta-button { background: linear-gradient(135deg, #065f46 0%, #047857 100%); transition: transform 0.2s active; }
        .cta-button:active { transform: scale(0.98); }
        
        /* å…¨éƒ¨å±•é–‹æ¨¡å¼æ¨£å¼ */
        .all-visible .content-section { display: block !important; margin-bottom: 2.5rem; padding-bottom: 2.5rem; border-bottom: 1px solid #e2e8f0; }
        .all-visible .cta-button { display: none; }
        .all-visible [id^="action"] { display: block !important; }
        .all-visible .question-item { opacity: 1 !important; transform: none !important; pointer-events: auto !important; }

        @media print { .no-print { display: none; } }
    </style>
</head>
<body class="text-slate-800">

    <!-- é ‚éƒ¨å°è¦½åˆ— -->
    <header class="sticky top-0 bg-white/95 backdrop-blur-md shadow-sm z-50 px-4 py-4 no-print border-b border-slate-100">
        <div class="flex justify-between items-center max-w-2xl mx-auto text-center">
            <h1 class="text-sm font-bold text-slate-700 truncate mr-1">é¢å°ç™Œç—‡åŠé‡å¤§å‚·ç—…é¢¨éšª.æˆ‘å€‘å¯ä»¥æ€éº¼åš</h1>
            <div class="flex gap-1 shrink-0">
                <button id="btn-link-mgr" onclick="showSection('link-manager', null)" class="bg-slate-100 text-slate-600 border border-slate-300 p-1.5 rounded-lg text-[11px] font-bold">ğŸ”— é€£çµç®¡ç†</button>
                <button id="btn-save-mobile" onclick="saveMobileVersion()" class="bg-indigo-600 text-white p-1.5 rounded-lg text-[11px] font-bold">ğŸ“± æ‰‹æ©Ÿç‰ˆ</button>
                <button id="btn-save-file" onclick="saveCurrentFile()" class="bg-emerald-600 text-white p-1.5 rounded-lg text-[11px] font-bold">ğŸ’¾ å­˜æª”</button>
                <button onclick="expandAll()" class="bg-blue-600 text-white p-1.5 rounded-lg text-[11px] font-bold">ğŸ“œ å±•é–‹</button>
                <button onclick="collapseAll()" class="bg-slate-400 text-white p-1.5 rounded-lg text-[11px] font-bold">ğŸ  é‡ç½®</button>
            </div>
        </div>
    </header>

    <!-- è¶…é€£çµå·¥å…·å½ˆçª— -->
    <div id="link-bubble" class="no-print">
        <input type="text" id="link-url" placeholder="è¼¸å…¥ç¶²å€..." class="text-base border border-slate-200 rounded-md px-2 py-1 outline-none w-40">
        <button onclick="applyLink()" class="bg-blue-600 text-white text-base font-bold px-4 py-1 rounded-md ml-1">åŠ å…¥</button>
        <button onclick="removeLink()" class="text-red-500 text-sm font-bold px-1 ml-1">å–æ¶ˆ</button>
    </div>

    <main class="max-w-2xl mx-auto px-4 pt-4">
        
        <!-- æ‰‹æ©Ÿå„ªåŒ–å°è¦½ç›¤ -->
        <div id="nav-grid" class="grid grid-cols-3 gap-2 mb-6 no-print">
            <button id="btn-intro-nav" onclick="showSection('intro', this)" class="btn-nav p-2 bg-white rounded-xl border border-slate-200 shadow-sm text-center flex flex-col items-center justify-center min-h-[85px]">
                <span class="text-2xl emoji-icon">ğŸ§ </span>
                <span class="text-[13px] font-bold mt-1 editable-element" contenteditable="true" onclick="event.stopPropagation()">è«‹æ€è€ƒå¹¾ä»¶äº‹</span>
            </button>
            <button onclick="showSection('step1', this)" class="btn-nav p-2 bg-white rounded-xl border border-slate-200 shadow-sm text-center flex flex-col items-center justify-center min-h-[85px]">
                <span class="text-2xl emoji-icon">ğŸ¥</span>
                <span class="text-[13px] font-bold mt-1 editable-element" contenteditable="true" onclick="event.stopPropagation()">èº«é«”/æ²»ç™‚</span>
            </button>
            <button onclick="showSection('step2', this)" class="btn-nav p-2 bg-white rounded-xl border border-slate-200 shadow-sm text-center flex flex-col items-center justify-center min-h-[85px]">
                <span class="text-2xl emoji-icon">ğŸ’°</span>
                <span class="text-[13px] font-bold mt-1 editable-element" contenteditable="true" onclick="event.stopPropagation()">è²¡å‹™/ç”¨è—¥</span>
            </button>
            <button onclick="showSection('rehab', this)" class="btn-nav p-2 bg-white rounded-xl border border-slate-200 shadow-sm text-center flex flex-col items-center justify-center min-h-[85px]">
                <span class="text-2xl emoji-icon">ğŸŒ±</span>
                <span class="text-[13px] font-bold mt-1 editable-element" contenteditable="true" onclick="event.stopPropagation()">å¾©å¥/å¿ƒç†</span>
            </button>
            <button onclick="showSection('table', this)" class="btn-nav p-2 bg-white rounded-xl border border-slate-200 shadow-sm text-center flex flex-col items-center justify-center min-h-[85px]">
                <span class="text-2xl emoji-icon">ğŸ“Š</span>
                <span class="text-[13px] font-bold mt-1 editable-element" contenteditable="true" onclick="event.stopPropagation()">ä¿éšœå°æ¯”</span>
            </button>
            <button onclick="showSection('summary', this)" class="btn-nav p-2 bg-white rounded-xl border border-slate-200 shadow-sm text-center flex flex-col items-center justify-center min-h-[85px]">
                <span class="text-2xl emoji-icon">ğŸ¯</span>
                <span class="text-[13px] font-bold mt-1 editable-element" contenteditable="true" onclick="event.stopPropagation()">è¡Œå‹•ç­–ç•¥</span>
            </button>
        </div>

        <!-- å…§å®¹å‘ˆç¾å€ -->
        <div id="content-container" class="bg-white rounded-2xl shadow-sm border border-slate-100 p-6 mb-10 min-h-[350px]">
            
            <div id="default-msg" class="flex flex-col items-center justify-center h-48 text-slate-400">
                <div class="animate-bounce mb-4 text-4xl">ğŸ‘‡</div>
                <p class="text-lg text-center font-bold">é¢å°é‡å¤§é¢¨éšªï¼Œæˆ‘å€‘æœ‰æ›´å¾å®¹çš„é¸æ“‡</p>
                <p id="edit-hint" class="text-sm mt-2 italic">æ‚¨å¯ä»¥è‡ªç”±é»æ“Šæ¨™é¡Œæˆ–å…§æ–‡é€²è¡Œç·¨è¼¯</p>
            </div>

            <!-- å€å¡Šï¼šè«‹æ€è€ƒå¹¾ä»¶äº‹ -->
            <section id="intro" class="content-section">
                <h2 class="text-2xl font-bold text-blue-800 mb-6 editable-element" contenteditable="true">è‹¥ä¸å¹¸ç¢ºè¨ºï¼Œæ‚¨æœ€æ“”å¿ƒçš„ä¸‰å€‹å•é¡Œ...</h2>
                <p id="click-hint" class="text-xs text-slate-400 mb-6 no-print italic text-center">(é»æ“Šè¢å¹•ä»»ä½•è™•ä¾åºé¡¯ç¤ºå•é¡Œ)</p>
                <div class="space-y-6">
                    <div class="question-item p-5 bg-blue-50 rounded-xl border-l-4 border-blue-400" data-q-index="1">
                        <p class="text-sm font-bold text-blue-900 mb-2">Q1.</p>
                        <p class="text-lg leading-relaxed editable-element" contenteditable="true">æœ‰ä¸€ç¨®ç™‚ç¨‹è¦åƒ¹ 200 è¬ä¸”æ•ˆæœæ¥µä½³ï¼Œæ‚¨çš„ç¬¬ä¸€ç›´è¦ºæ˜¯è©¢å•ã€Œé†«å¸«é€™æœ‰æ•ˆå—ï¼Ÿã€é‚„æ˜¯ã€Œæˆ‘çš„ä¿éšªè³ å¾—å¤ å—ï¼Ÿã€</p>
                    </div>
                    <div class="question-item p-5 bg-blue-50 rounded-xl border-l-4 border-blue-400" data-q-index="2">
                        <p class="text-sm font-bold text-blue-900 mb-2">Q2.</p>
                        <p class="text-lg leading-relaxed editable-element" contenteditable="true">è¬ä¸€éœ€è¦æ²»ç™‚ä¼‘é¤Š 2 å¹´ï¼Œæ‚¨çš„å­˜æ¬¾åœ¨æ”¯æ’é†«è—¥è²»å¾Œï¼Œé‚„èƒ½ç¢ºä¿ã€Œæˆ¿è²¸ã€æ•™è‚²é‡‘ã€ä¸ç¸®æ°´å—ï¼Ÿ</p>
                    </div>
                    <div class="question-item p-5 bg-blue-50 rounded-xl border-l-4 border-blue-400" data-q-index="3">
                        <p class="text-sm font-bold text-blue-900 mb-2">Q3.</p>
                        <p class="text-lg leading-relaxed editable-element" contenteditable="true">æ‚¨å¸Œæœ›åœ¨ç—…æˆ¿é†’ä¾†æ™‚æ€è€ƒçš„æ˜¯ã€Œå¦‚ä½•é…åˆç©æ¥µæ²»ç™‚ã€ï¼Œé‚„æ˜¯ã€Œæ¯å¤©å¼µé–‹çœ¼åˆè¦èŠ±æ‰å¤šå°‘éŒ¢ã€ï¼Ÿ</p>
                    </div>
                </div>
            </section>

            <!-- å€å¡Šï¼šèº«é«”è¨ˆç•« -->
            <section id="step1" class="content-section">
                <h2 class="text-2xl font-bold text-slate-800 mb-6 editable-element" contenteditable="true">ç¬¬ä¸€éšæ®µï¼šèº«é«”èˆ‡æ²»ç™‚è¨ˆç•«</h2>
                <div class="space-y-4 text-base lg:text-lg">
                    <div class="flex gap-2 items-start"><span>ğŸ”¹</span> <span class="editable-element" contenteditable="true"><span class="font-bold text-xl block mb-1">ç²¾æº–é†«ç™‚è«®è©¢ï¼š</span> åŸºå› æª¢æ¸¬ã€å°‹æ±‚ç¬¬äºŒæ„è¦‹ã€‚</span></div>
                    <div class="flex gap-2 items-start"><span>ğŸ”¹</span> <span class="editable-element" contenteditable="true"><span class="font-bold text-xl block mb-1">æ‰‹è¡“æ±ºç­–ï¼š</span> å‚³çµ±æ‰‹è¡“ vs. <span class="insurance-text underline"><a href="https://youtu.be/hKecv4nH-M0?si=nam95DZf1Abs3tE9" target="_blank" onclick="window.open(this.href, '_blank'); return false;">é”æ–‡è¥¿æ©Ÿæ¢°æ‰‹è‡‚</a>/å¾®å‰µæ‰‹è¡“</span> (å‚·å£å°ã€æ¢å¾©å¿«)ã€‚</span></div>
                    <div class="flex gap-2 items-start"><span>ğŸ”¹</span> <span class="editable-element" contenteditable="true"><span class="font-bold text-xl block mb-1">ä½é™¢å“è³ªï¼š</span> å¥ä¿æˆ¿ vs. <span class="insurance-text underline"><a href="https://youtu.be/mkeUSfWgWBU?si=ohUasTUxqGTFguVs" target="_blank" onclick="window.open(this.href, '_blank'); return false;">å–®äººæˆ¿</a></span> (é™ä½æ„ŸæŸ“æ©Ÿç‡èˆ‡ç…§é¡§è€…å¿ƒç†è² æ“”)ã€‚</span></div>
                </div>
                <div class="mt-10">
                    <button onclick="toggleAction('action1')" class="cta-button w-full text-white py-4 px-4 rounded-xl shadow-lg font-bold text-lg flex justify-between items-center no-print">
                        ã€æˆ‘å€‘å¯ä»¥æ€éº¼åšã€‘ <span id="arrow1">â–¼</span>
                    </button>
                    <div id="action1" class="hidden mt-3 p-5 bg-emerald-50 rounded-xl border border-emerald-100 text-lg insurance-text editable-element" contenteditable="true">
                        å»ºè­°é…ç½®é«˜é¡åº¦ã€Œé†«ç™‚å¯¦æ”¯å¯¦ä»˜ã€éšªåŠæ‰‹è¡“ä¿éšªï¼Œå°‡é«˜é¡è‡ªè²»ç”¨è—¥ï¼Œèˆ‡å–®äººæˆ¿å·®é¡ï¼Œç”±ä¿éšªæä¾›è£œåŠ©ä»¥é™ä½è²¡å‹™å£“åŠ›ã€‚
                    </div>
                </div>
            </section>

            <!-- å€å¡Šï¼šè²¡å‹™è¨ˆç•« -->
            <section id="step2" class="content-section">
                <h2 class="text-2xl font-bold text-slate-800 mb-6 editable-element" contenteditable="true">ç¬¬äºŒéšæ®µï¼šè²¡å‹™èˆ‡é«˜é¡ç”¨è—¥</h2>
                <div class="space-y-4 mb-8">
                    <div class="text-lg p-4 bg-slate-50 rounded-lg editable-element" contenteditable="true">
                        <span class="font-bold block mb-1 text-xl text-slate-700">ä½é™¢é›œè²»ï¼š</span> <span class="insurance-text">è‡ªè²»é†«æã€é˜²æ²¾é»è²¼ç‰‡ã€ä½é™¢è—¥ç‰©</span>
                    </div>
                    <div class="text-lg p-4 bg-slate-50 rounded-lg editable-element" contenteditable="true">
                        <span class="font-bold block mb-1 text-xl text-slate-700">é•·æœŸè‡ªè²»è—¥ï¼š</span> <span class="insurance-text">æ¨™é¶è—¥ç‰©ã€è³ªå­ï¼é‡ç²’å­æ²»ç™‚ã€å…ç–«ç™‚æ³• (å¹´èŠ±ç™¾è¬å¸¸è¦‹)</span>
                    </div>
                    <div class="text-lg p-4 bg-slate-50 rounded-lg editable-element" contenteditable="true">
                        <span class="font-bold block mb-1 text-xl text-slate-700">å®¶åº­é˜²è­·ç¶²ï¼š</span> <span class="insurance-text">æˆ¿è²¸è² æ“”ã€è–ªè³‡è£œå„Ÿã€çœ‹è­·(æ¯æœˆ6-8è¬)</span>
                    </div>
                </div>
                <button onclick="toggleAction('action2')" class="cta-button w-full text-white py-4 px-4 rounded-xl shadow-lg font-bold text-lg flex justify-between items-center no-print">
                    ã€æˆ‘å€‘å¯ä»¥æ€éº¼åšã€‘ <span id="arrow2">â–¼</span>
                </button>
                <div id="action2" class="hidden mt-3 p-5 bg-emerald-50 rounded-xl border border-emerald-100 text-lg insurance-text editable-element" contenteditable="true">
                    è¦åŠƒé«˜é¡çš„å¯¦æ”¯å¯¦ä»˜é†«ç™‚ä¿éšªï¼Œä½é™¢æ—¥é¡æ´¥è²¼ä¿éšªåŠã€Œä¸€æ¬¡çµ¦ä»˜å‹ã€ç™Œç—‡æˆ–é‡å¤§å‚·ç—…éšªã€‚é ˜å–ä¸€æ•´ç­†è³‡é‡‘ (å»ºè­°200è¬ä»¥ä¸Š)ï¼Œè§£æ±ºé«˜é¡è‡ªè²»è—¥åŠçœ‹è­·è²»ï¼Œä¸¦ç¶­æŒå‡ºé™¢å¾Œå®¶åº­ç”Ÿè¨ˆä¸å´©æ½°ã€‚
                </div>
            </section>

            <!-- å€å¡Šï¼šå¾©å¥è¨ˆç•« -->
            <section id="rehab" class="content-section">
                <h2 class="text-2xl font-bold text-slate-800 mb-6 editable-element" contenteditable="true">ç¬¬ä¸‰éšæ®µï¼šå¾©å¥èˆ‡å¿ƒç†é‡å»º</h2>
                <div class="space-y-4 text-base lg:text-lg">
                    <div class="flex gap-2 items-start text-slate-600">ğŸŒ¿ <span class="editable-element" contenteditable="true"><span class="font-bold text-xl text-slate-800 block mb-1">ç‡Ÿé¤Šç®¡ç†ï¼š</span> è¡“å¾Œé•·æœŸæ˜‚è²´çš„ç‡Ÿé¤Šè£œå……å“ã€‚</span></div>
                    <div class="flex gap-2 items-start text-slate-600">ğŸŒ¿ <span class="editable-element" contenteditable="true"><span class="font-bold text-xl text-slate-800 block mb-1">å±…å®¶æ”¹è£ï¼š</span> <span class="insurance-text">ç„¡éšœç¤™è¨­æ–½æˆ–ç‰¹è£½é›»å‹•åºŠä½ã€‚</span></span></div>
                    <div class="flex gap-2 items-start text-slate-600">ğŸŒ¿ <span class="editable-element" contenteditable="true"><span class="font-bold text-xl text-slate-800 block mb-1">å¿ƒç†èª¿é©ï¼š</span> è«®å•†è²»ç”¨ã€ç—…å‹åœ˜é«”èˆ‡é‡è¿”è·å ´è¦ç•«ã€‚</span></div>
                </div>
                <div class="mt-10">
                    <button onclick="toggleAction('action3')" class="cta-button w-full text-white py-4 px-4 rounded-xl shadow-lg font-bold text-lg flex justify-between items-center no-print">
                        ã€æˆ‘å€‘å¯ä»¥æ€éº¼åšã€‘ <span id="arrow3">â–¼</span>
                    </button>
                    <div id="action3" class="hidden mt-3 p-5 bg-emerald-50 rounded-xl border border-emerald-100 text-lg insurance-text editable-element" contenteditable="true">
                        åˆ©ç”¨ã€Œä¸€æ¬¡çµ¦ä»˜å‹ã€ä¿éšªçµ¦ä»˜å¸¶ä¾†çš„è²¡å‹™å¯¬è£•ï¼Œæ›å–å¿ƒéˆç—Šç™’çš„æ™‚é–“ã€‚ç¢ºä¿ä¸éœ€è¦åœ¨ç—…é«”æœªç—Šç™’å‰ç‚ºäº†ç¶“æ¿Ÿå£“åŠ›å¼·è¡Œå¾©å·¥ã€‚
                    </div>
                </div>
            </section>

            <!-- å€å¡Šï¼šè¡¨æ ¼å°æ¯” -->
            <section id="table" class="content-section">
                <h2 class="text-2xl font-bold text-slate-800 mb-6 editable-element" contenteditable="true">æ ¸å¿ƒä¿éšœåˆ†æå°æ¯”</h2>
                <div class="border rounded-xl overflow-hidden shadow-sm text-sm">
                    <div class="grid grid-cols-2 bg-slate-100 p-4 font-bold border-b text-center">
                        <div class="editable-element" contenteditable="true">å‚³çµ±å®šé¡é†«ç™‚éšª</div>
                        <div class="text-emerald-800 editable-element" contenteditable="true">ã€Œä¸€æ¬¡çµ¦ä»˜å‹ã€ä¿éšªå„ªé»</div>
                    </div>
                    <div class="p-4 border-b">
                        <p class="font-bold mb-2 text-base editable-element" contenteditable="true">ä½é™¢æ‰‹è¡“èˆ‡ç—…æˆ¿</p>
                        <div class="grid grid-cols-2 gap-3">
                            <div class="text-slate-500 editable-element" contenteditable="true">ä¾å¤©æ•¸è³ </div>
                            <div class="insurance-text editable-element" contenteditable="true">è£œåŠ©å¯¦æ”¯å¯¦ä»˜å·®é¡åŠçœ‹è­·è²»ç”¨</div>
                        </div>
                    </div>
                    <div class="p-4 border-b">
                        <p class="font-bold mb-2 text-base editable-element" contenteditable="true">æ¨™é¶è—¥ç‰©èˆ‡ç”¨è—¥</p>
                        <div class="grid grid-cols-2 gap-3">
                            <div class="text-slate-500 editable-element" contenteditable="true">ä¸ä½é™¢å°±ä¸è³ </div>
                            <div class="insurance-text editable-element" contenteditable="true">åˆ©ç”¨ã€Œä¸€æ¬¡çµ¦ä»˜å‹ã€ä¿éšªæä¾›è²¡å‹™è£œåŠ©ã€‚</div>
                        </div>
                    </div>
                    <div class="p-4">
                        <p class="font-bold mb-2 text-base editable-element" contenteditable="true">å®¶åº­ç”Ÿè¨ˆè£œå„Ÿ</p>
                        <div class="grid grid-cols-2 gap-3">
                            <div class="text-slate-500 editable-element" contenteditable="true">ç„¡æ­¤é …çµ¦ä»˜</div>
                            <div class="insurance-text editable-element" contenteditable="true">åˆ©ç”¨ã€Œä¸€æ¬¡çµ¦ä»˜å‹ã€ä¿éšªæä¾›è²¡å‹™è£œåŠ©ï¼Œæ›¿ä»£ 2 å¹´è–ªè³‡ä¸å—æ</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- å€å¡Šï¼šç¸½çµç­–ç•¥ -->
            <section id="summary" class="content-section">
                <h2 class="text-2xl font-bold text-blue-900 mb-6 editable-element" contenteditable="true">å…·é«”å»ºè­°ï¼šç¾åœ¨çš„ä¸‰å€‹å‹•ä½œ</h2>
                <div class="space-y-4">
                    <div class="flex items-center gap-4 p-5 bg-white border border-slate-100 rounded-xl shadow-sm">
                        <div class="bg-blue-600 text-white w-8 h-8 rounded flex items-center justify-center text-lg font-bold shrink-0">1</div>
                        <p class="text-lg insurance-text editable-element" contenteditable="true">ä¸€æ¬¡çµ¦ä»˜å‹ç™Œç—‡æˆ–é‡å¤§å‚·ç—…çµ¦ä»˜</p>
                    </div>
                    <div class="flex items-center gap-4 p-5 bg-white border border-slate-100 rounded-xl shadow-sm">
                        <div class="bg-blue-600 text-white w-8 h-8 rounded flex items-center justify-center text-lg font-bold shrink-0">2</div>
                        <p class="text-lg insurance-text editable-element" contenteditable="true">ä½é™¢é†«ç™‚éšªï¼Œæ‰‹è¡“éšªï¼Œä½é™¢æ”¶å…¥ä¿éšª</p>
                    </div>
                    <div class="flex items-center gap-4 p-5 bg-white border border-slate-100 rounded-xl shadow-sm">
                        <div class="bg-blue-600 text-white w-8 h-8 rounded flex items-center justify-center text-lg font-bold shrink-0">3</div>
                        <p class="text-lg insurance-text editable-element" contenteditable="true">é«˜é¡ç™Œç—‡ä¿éšª</p>
                    </div>
                </div>
                <p class="mt-8 text-center text-sm text-slate-400">ä¿éšœæ˜¯ç”¨ä¾†å®ˆè­·æˆ‘å€‘æœ€æ„›çš„äººï¼Œè®“å›°é›£æ™‚ä¾ç„¶æœ‰å°Šåš´ã€‚</p>
            </section>

            <!-- ç®¡ç†ä¸­å¿ƒ -->
            <section id="link-manager" class="content-section">
                <h2 class="text-xl font-bold text-emerald-800 mb-6">è¶…é€£çµç®¡ç†ä¸­å¿ƒ</h2>
                <div class="overflow-x-auto">
                    <table class="w-full text-xs border-collapse" id="link-table">
                        <thead>
                            <tr class="bg-emerald-50 text-emerald-900 border-b">
                                <th class="p-3 text-left">é¡¯ç¤ºæ–‡å­—</th>
                                <th class="p-3 text-left">ç¶²å€</th>
                                <th class="p-3 text-center">æ“ä½œ</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y" id="link-table-body"></tbody>
                    </table>
                </div>
                <div id="no-links-msg" class="text-center py-10 text-slate-400 text-sm hidden">ç›®å‰å°šæœªå»ºç«‹ä»»ä½•è¶…é€£çµ</div>
            </section>

        </div>
    </main>

    <script>
        let currentQuestionStep = 0;

        // --- å…¨å±€å°è¦½èˆ‡å•é¡Œåˆ‡æ›ç›£è½å™¨ ---
        document.addEventListener('click', function(e) {
            const introSection = document.getElementById('intro');
            if (introSection && introSection.classList.contains('active')) {
                if (!e.target.closest('button') && !e.target.closest('.editable-element') && !e.target.closest('header')) {
                    const questions = introSection.querySelectorAll('.question-item');
                    if (currentQuestionStep < questions.length) {
                        questions[currentQuestionStep].classList.add('show');
                        currentQuestionStep++;
                    }
                }
            }

            const link = e.target.closest('.editable-element a');
            if (link && link.getAttribute('href')) {
                if (window.getSelection().isCollapsed) {
                    window.open(link.href, '_blank');
                    e.preventDefault();
                    e.stopPropagation();
                }
            }
        }, true);

        // --- UI æ§åˆ¶é‚è¼¯ ---
        function showSection(id, btn) {
            document.getElementById('content-container').classList.remove('all-visible');
            document.getElementById('default-msg').style.display = 'none';
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.btn-nav').forEach(b => b.classList.remove('active'));
            
            const target = document.getElementById(id);
            if (target) {
                target.classList.add('active');
                if (btn) btn.classList.add('active');
                if (id === 'intro') {
                    currentQuestionStep = 0;
                    target.querySelectorAll('.question-item').forEach(q => q.classList.remove('show'));
                }
                if (id === 'link-manager') refreshLinkTable();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function toggleAction(id) {
            const el = document.getElementById(id);
            const arrowId = id.replace('action', 'arrow');
            const arrow = document.getElementById(arrowId);
            if (el.classList.contains('hidden')) {
                el.classList.remove('hidden');
                arrow.textContent = 'â–²';
            } else {
                el.classList.add('hidden');
                arrow.textContent = 'â–¼';
            }
        }

        function expandAll() {
            document.getElementById('default-msg').style.display = 'none';
            document.getElementById('content-container').classList.add('all-visible');
            document.querySelectorAll('.btn-nav').forEach(b => b.classList.remove('active'));
            window.scrollTo({ top: 150, behavior: 'smooth' });
        }

        function collapseAll() {
            document.getElementById('content-container').classList.remove('all-visible');
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.btn-nav').forEach(b => b.classList.remove('active'));
            document.getElementById('default-msg').style.display = 'flex';
            document.querySelectorAll('[id^="action"]').forEach(el => el.classList.add('hidden'));
            document.querySelectorAll('[id^="arrow"]').forEach(el => el.textContent = 'â–¼');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // --- è¶…é€£çµå·¥å…· ---
        const bubble = document.getElementById('link-bubble');
        const urlInput = document.getElementById('link-url');
        let currentRange = null;

        document.addEventListener('selectionchange', () => {
            const sel = window.getSelection();
            const editableEl = sel.anchorNode ? sel.anchorNode.parentElement.closest('.editable-element') : null;
            if (editableEl && !sel.isCollapsed && sel.toString().trim().length > 0) {
                const rect = sel.getRangeAt(0).getBoundingClientRect();
                bubble.style.display = 'flex';
                bubble.style.top = `${rect.top + window.scrollY - 55}px`;
                bubble.style.left = `${rect.left + window.scrollX}px`;
                currentRange = sel.getRangeAt(0).cloneRange();
            } else {
                if (document.activeElement !== urlInput && !bubble.contains(document.activeElement)) {
                    bubble.style.display = 'none';
                }
            }
        });

        function applyLink() {
            const url = urlInput.value.trim();
            if (!url) return;
            const sel = window.getSelection();
            sel.removeAllRanges();
            sel.addRange(currentRange);
            const finalUrl = url.startsWith('http') ? url : 'https://' + url;
            document.execCommand('createLink', false, finalUrl);
            const links = document.querySelectorAll('.editable-element a');
            links.forEach(a => {
                a.target = '_blank';
                a.classList.add('text-blue-600', 'underline');
                a.setAttribute('onclick', "window.open(this.href, '_blank'); return false;");
            });
            bubble.style.display = 'none';
            urlInput.value = '';
            refreshLinkTable();
        }

        function removeLink() {
            document.execCommand('unlink', false, null);
            bubble.style.display = 'none';
            refreshLinkTable();
        }

        // --- ç®¡ç†ä¸­å¿ƒ ---
        function refreshLinkTable() {
            const tbody = document.getElementById('link-table-body');
            const noMsg = document.getElementById('no-links-msg');
            const links = document.querySelectorAll('.editable-element a');
            if (!tbody) return;
            tbody.innerHTML = '';
            if (links.length === 0) { noMsg.classList.remove('hidden'); return; }
            noMsg.classList.add('hidden');
            links.forEach((link, index) => {
                const row = document.createElement('tr');
                row.className = "hover:bg-slate-50";
                row.innerHTML = `
                    <td class="p-3"><input type="text" class="w-full border-none bg-transparent outline-none focus:bg-white text-base" value="${link.innerText}" oninput="updateLinkContent(${index}, 'text', this.value)"></td>
                    <td class="p-3"><input type="text" class="w-full border-none bg-transparent outline-none focus:bg-white text-blue-600 truncate text-base" value="${link.getAttribute('href')}" oninput="updateLinkContent(${index}, 'href', this.value)"></td>
                    <td class="p-3 text-center"><button onclick="deleteLinkByIndex(${index})" class="text-red-500 font-bold px-2 text-base">åˆªé™¤</button></td>
                `;
                tbody.appendChild(row);
            });
        }

        function updateLinkContent(index, type, val) {
            const links = document.querySelectorAll('.editable-element a');
            if (links[index]) {
                if (type === 'text') links[index].innerText = val;
                if (type === 'href') {
                    links[index].setAttribute('href', val);
                    links[index].setAttribute('onclick', "window.open(this.href, '_blank'); return false;");
                }
            }
        }

        function deleteLinkByIndex(index) {
            const links = document.querySelectorAll('.editable-element a');
            if (links[index]) {
                const textNode = document.createTextNode(links[index].innerText);
                links[index].parentNode.replaceChild(textNode, links[index]);
                refreshLinkTable();
            }
        }

        // --- å­˜æª” ---
        function getMinguoDate() {
            const now = new Date();
            const year = now.getFullYear() - 1911;
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            return `${year}${month}${day}`;
        }

        function triggerDownload(content, filename) {
            const blob = new Blob([content], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function saveCurrentFile() {
            collapseAll();
            setTimeout(() => {
                const htmlContent = '<!DOCTYPE html>\n' + document.documentElement.outerHTML;
                triggerDownload(htmlContent, `ç™Œç—‡éšªèˆ‡é‡å¤§å‚·ç—…éšª${getMinguoDate()}.html`);
            }, 500);
        }

        function saveMobileVersion() {
            collapseAll();
            setTimeout(() => {
                const cloneDoc = document.documentElement.cloneNode(true);
                const idsToRemove = ['btn-link-mgr', 'btn-save-file', 'btn-save-mobile', 'link-manager'];
                idsToRemove.forEach(id => {
                    const el = cloneDoc.querySelector(`#${id}`);
                    if (el) el.remove();
                });
                const editHint = cloneDoc.querySelector('#edit-hint');
                if (editHint) editHint.remove();
                const clickHint = cloneDoc.querySelector('#click-hint');
                if (clickHint) clickHint.remove();
                cloneDoc.querySelectorAll('[contenteditable="true"]').forEach(el => el.removeAttribute('contenteditable'));
                const htmlContent = '<!DOCTYPE html>\n' + cloneDoc.outerHTML;
                triggerDownload(htmlContent, `ç™Œç—‡éšªèˆ‡é‡å¤§å‚·ç—…éšª${getMinguoDate()}_æ‰‹æ©Ÿæ¼”ç¤ºç‰ˆ.html`);
            }, 500);
        }

        window.onload = refreshLinkTable;
    </script>
</body>
</html>