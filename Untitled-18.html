<!DOCTYPE html>
<html lang="zh-Hant"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ä¿éšªå•†å“å°è¦½ç³»çµ± (iOS è¶…é€£çµä¿®å¾©ç‰ˆ)</title>
    <style>
        /* --- CSS è®Šæ•¸å®šç¾© --- */
        :root {
            --level-0-bg: #28a745;
            --level-0-text: #ffffff;
            --level-1-text: #007bff;
            --level-2-text: #654321;
            --level-3-text: #E65100;
            --level-4-text: #8E44AD;
            --product-text: #333333;
            --mobile-bg: #f2f4f8;
            --mobile-header-bg: linear-gradient(90deg, #005a9c, #007bff);
            --hover-red: #dc3545; 
            --hover-text: #ffffff; 
            --dynamic-level-color: #8E44AD; 
        }

        /* --- å…¨å±€æ¨£å¼ --- */
        body { font-family: -apple-system, "Helvetica Neue", Helvetica, Arial, "PingFang TC", "Microsoft JhengHei", sans-serif; background-color: var(--mobile-bg); margin: 0; padding: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        .view { display: none; flex-direction: column; width: 100%; height: 100%; position: absolute; top: 0; left: 0; background: var(--mobile-bg); }
        .view.active { display: flex; z-index: 10; }
        .header { background: var(--mobile-header-bg); color: white; padding: 15px; text-align: center; position: relative; flex-shrink: 0; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        .back-btn { position: absolute; left: 10px; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.2); border: none; color: white; padding: 5px 12px; border-radius: 4px; cursor: pointer; }
        .content { flex: 1; overflow-y: auto; padding: 15px; -webkit-overflow-scrolling: touch; }

        /* --- åˆ—è¡¨æ¨£å¼ --- */
        .list-item { background: white; margin-bottom: 10px; padding: 15px; border-radius: 10px; display: flex; justify-content: space-between; align-items: center; text-decoration: none; color: inherit; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        .list-item:active { background: #f0f0f0; }
        .item-text { font-weight: 500; }
        .item-arrow { color: #ccc; }

        /* --- åœ“åœˆé¸å–®æ¨£å¼ --- */
        .circle-container { position: relative; width: 300px; height: 300px; margin: 50px auto; }
        .center-circle { position: absolute; width: 100px; height: 100px; left: 100px; top: 100px; border-radius: 50%; background: var(--level-0-bg); color: white; display: flex; align-items: center; text-align: center; justify-content: center; font-weight: bold; font-size: 1.1em; z-index: 2; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        .sub-circle { position: absolute; width: 80px; height: 80px; border-radius: 50%; background: white; border: 2px solid #ddd; display: flex; align-items: center; text-align: center; justify-content: center; font-size: 0.9em; font-weight: 500; cursor: pointer; transition: all 0.3s; z-index: 1; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }

        /* --- åˆ—å°å°ˆç”¨æ¨£å¼ --- */
        @media print {
            body { background: white !important; overflow: visible !important; height: auto !important; }
            .no-print { display: none !important; }
            .view { position: static !important; display: none !important; }
            /* ä¿®æ­£ iOS é€£çµå¤±æ•ˆçš„é—œéµï¼šå¼·åˆ¶é¡¯ç¤ºèˆ‡é»æ“Šå€åŸŸ */
            a { text-decoration: underline !important; color: #007bff !important; pointer-events: auto !important; }
            .printing-suggested-view #suggested-product-list-view { display: block !important; }
            /* ç§»é™¤é™°å½±æå‡è½‰ PDF æˆåŠŸç‡ */
            * { box-shadow: none !important; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
        }

        /* é€™è£¡æ˜¯ç‚ºäº†è®“åˆ—å°æ¨¡å¼ä¸‹ç•«é¢æ­£å¸¸çš„è¼”åŠ© Class */
        body.printing-suggested-view .view { display: none; }
        body.printing-suggested-view #suggested-product-list-view { display: block; position: static; height: auto; overflow: visible; }
        body.printing-suggested-view .header, body.printing-suggested-view .back-btn { display: none; }
    </style>
</head>
<body>

    <!-- ä¸»é¸å–®è¦–çª— (åœ“åœˆç‰ˆ) -->
    <div id="main-menu-view" class="view active">
        <div class="header">ä¿éšªå°è¦½ç³»çµ±</div>
        <div class="content">
            <div class="circle-container">
                <div class="center-circle">ä¿éšª<br>è¦åŠƒ</div>
                <div class="sub-circle" style="top: 0; left: 110px;" onclick="showView('#suggested-main-menu-view')">å»ºè­°çµ„åˆ</div>
                <div class="sub-circle" style="top: 110px; right: 0;" onclick="showView('#traditional-list-view')">å‚³çµ±å£½éšª</div>
            </div>
            <p style="text-align:center; color:#666;">é»æ“Šã€Œå»ºè­°çµ„åˆã€æ¸¬è©¦åˆ—å°</p>
        </div>
    </div>

    <!-- å»ºè­°çµ„åˆä¸»é¸å–® -->
    <div id="suggested-main-menu-view" class="view">
        <div class="header">
            <button class="back-btn" onclick="showView('#main-menu-view')">è¿”å›</button>
            å»ºè­°çµ„åˆ
        </div>
        <div class="content">
            <div class="list-item" onclick="showProductList('å»ºè­°æ–¹æ¡ˆ A')">
                <span class="item-text">å»ºè­°æ–¹æ¡ˆ A</span>
                <span class="item-arrow">â¯</span>
            </div>
            <div class="list-item" onclick="showProductList('å»ºè­°æ–¹æ¡ˆ B')">
                <span class="item-text">å»ºè­°æ–¹æ¡ˆ B</span>
                <span class="item-arrow">â¯</span>
            </div>
        </div>
    </div>

    <!-- å»ºè­°çµ„åˆç”¢å“åˆ—è¡¨ (åŒ…å«åˆ—å°æŒ‰éˆ•) -->
    <div id="suggested-product-list-view" class="view">
        <div class="header">
            <button class="back-btn no-print" onclick="showView('#suggested-main-menu-view')">è¿”å›</button>
            <span id="suggested-list-title">ç”¢å“åˆ—è¡¨</span>
            <!-- åˆ—å°æŒ‰éˆ• -->
            <button id="print-suggested-view-btn" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); background: #28a745; border: none; color: white; padding: 5px 12px; border-radius: 4px; cursor: pointer;" class="no-print">
                ğŸ–¨ï¸ åˆ—å°/PDF
            </button>
        </div>
        <div class="content" id="suggested-product-list-content">
            <!-- ç”¢å“å…§å®¹æœƒå‹•æ…‹æ’å…¥ -->
            <div class="list-item">
                <a href="https://www.google.com" target="_blank" style="width:100%; display:flex; justify-content:space-between; text-decoration:none; color:inherit;">
                    <span class="item-text">æ¸¬è©¦ç”¢å“ (è¶…é€£çµè‡³ Google)</span>
                    <span class="item-arrow">é€£çµ â¯</span>
                </a>
            </div>
             <div class="list-item">
                <a href="https://www.example.com" target="_blank" style="width:100%; display:flex; justify-content:space-between; text-decoration:none; color:inherit;">
                    <span class="item-text">æ¸¬è©¦ç”¢å“ (è¶…é€£çµè‡³ç¯„ä¾‹ç¶²é )</span>
                    <span class="item-arrow">é€£çµ â¯</span>
                </a>
            </div>
        </div>
    </div>

    <!-- å‚³çµ±åˆ—è¡¨è¦–çª— -->
    <div id="traditional-list-view" class="view">
        <div class="header">
            <button class="back-btn" onclick="showView('#main-menu-view')">è¿”å›</button>
            å‚³çµ±å£½éšªåˆ—è¡¨
        </div>
        <div class="content">
            <div class="list-item"><span class="item-text">å®šæœŸå£½éšª</span><span class="item-arrow">â¯</span></div>
            <div class="list-item"><span class="item-text">çµ‚èº«å£½éšª</span><span class="item-arrow">â¯</span></div>
        </div>
    </div>

    <script>
        // ç•«é¢åˆ‡æ›é‚è¼¯
        function showView(selector) {
            document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
            document.querySelector(selector).classList.add('active');
        }

        function showProductList(title) {
            document.getElementById('suggested-list-title').innerText = title;
            showView('#suggested-product-list-view');
        }

        // --- æ ¸å¿ƒæ”¹è£ï¼šåˆ—å°æŒ‰éˆ•èˆ‡ç¨‹å¼åˆ†æ ---
        
        document.getElementById('print-suggested-view-btn').onclick = function() {
            // åµæ¸¬æ˜¯å¦ç‚º iOS è£ç½® (iPhone/iPad)
            const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;

            if (isIOS) {
                // ã€iOS å°ˆç”¨ä¿®å¾©é‚è¼¯ã€‘
                // 1. å–å¾—è¦åˆ—å°çš„å…§å®¹ HTML
                const printContent = document.getElementById('suggested-product-list-view').innerHTML;
                const headContent = document.head.innerHTML;

                // 2. å»ºç«‹ä¸€å€‹è‡¨æ™‚çš„ Blob ç¶²é 
                // é€™æ˜¯ç‚ºäº†ç¹é iOS Safari åœ¨è¤‡é›œ DOM ä¸‹æœƒå°‡åˆ—å°å…§å®¹ã€Œåœ–ç‰‡åŒ–ã€çš„å•é¡Œ
                const html = `
                    <html>
                        <head>
                            ${headContent}
                            <style>
                                .no-print { display: none !important; }
                                body { background: white !important; padding: 20px; overflow: visible !important; }
                                .view { display: block !important; position: static !important; }
                                a { color: #007bff !important; text-decoration: underline !important; }
                            </style>
                        </head>
                        <body>
                            <div class="printing-suggested-view">
                                ${printContent}
                            </div>
                            <script>
                                window.onload = function() {
                                    setTimeout(function() {
                                        window.print();
                                    }, 500);
                                };
                            <\/script>
                        </body>
                    </html>
                `;

                // 3. ä½¿ç”¨æ–°åˆ†é æ‰“é–‹è©²ç´”æ·¨ç¶²é ï¼Œèª˜ç™¼ iOS ç”¢ç”Ÿé«˜å“è³ª PDF (å«é€£çµ)
                const blob = new Blob([html], { type: 'text/html' });
                const url = URL.createObjectURL(blob);
                window.open(url, '_blank');
            } else {
                // ã€é›»è…¦ç‰ˆ/Android åŸå§‹é‚è¼¯ã€‘
                document.body.classList.add('printing-suggested-view');
                setTimeout(() => {
                    window.print();
                    setTimeout(() => {
                        document.body.classList.remove('printing-suggested-view');
                    }, 1000);
                }, 200);
            }
        };
    </script>
</body>
</html>